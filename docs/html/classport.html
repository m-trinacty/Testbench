<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ODrive library: port Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ODrive library
   </div>
   <div id="projectbrief">Library for controlling ODrive unit and motors written in C++ and store data from it</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classport-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">port Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The port class.  
 <a href="classport.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="port_8h_source.html">port.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5f40cbc450a8b0342a79b6e7ca4886e9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#a5f40cbc450a8b0342a79b6e7ca4886e9">port</a> ()</td></tr>
<tr class="memdesc:a5f40cbc450a8b0342a79b6e7ca4886e9"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classport.html#a5f40cbc450a8b0342a79b6e7ca4886e9" title="port::port">port::port</a>  <a href="classport.html#a5f40cbc450a8b0342a79b6e7ca4886e9">More...</a><br /></td></tr>
<tr class="separator:a5f40cbc450a8b0342a79b6e7ca4886e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a503922986aa052488c19a63e02e7e30a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#a503922986aa052488c19a63e02e7e30a">port</a> (std::string portName)</td></tr>
<tr class="memdesc:a503922986aa052488c19a63e02e7e30a"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classport.html#a5f40cbc450a8b0342a79b6e7ca4886e9" title="port::port">port::port</a>  <a href="classport.html#a503922986aa052488c19a63e02e7e30a">More...</a><br /></td></tr>
<tr class="separator:a503922986aa052488c19a63e02e7e30a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcab032c50e700b30f70c5fed3d1bb34"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#abcab032c50e700b30f70c5fed3d1bb34">write_port</a> (std::string message)</td></tr>
<tr class="memdesc:abcab032c50e700b30f70c5fed3d1bb34"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classport.html#abcab032c50e700b30f70c5fed3d1bb34" title="port::write_port">port::write_port</a>  <a href="classport.html#abcab032c50e700b30f70c5fed3d1bb34">More...</a><br /></td></tr>
<tr class="separator:abcab032c50e700b30f70c5fed3d1bb34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57a366c63e2ebbd24c4a466e90cbece0"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#a57a366c63e2ebbd24c4a466e90cbece0">read_port</a> ()</td></tr>
<tr class="memdesc:a57a366c63e2ebbd24c4a466e90cbece0"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classport.html#a57a366c63e2ebbd24c4a466e90cbece0" title="port::read_port">port::read_port</a>  <a href="classport.html#a57a366c63e2ebbd24c4a466e90cbece0">More...</a><br /></td></tr>
<tr class="separator:a57a366c63e2ebbd24c4a466e90cbece0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88c79b2d6377e65a2357e2700605c7d5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#a88c79b2d6377e65a2357e2700605c7d5">set_port</a> (std::string portName)</td></tr>
<tr class="memdesc:a88c79b2d6377e65a2357e2700605c7d5"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classport.html#a88c79b2d6377e65a2357e2700605c7d5" title="port::set_port">port::set_port</a>  <a href="classport.html#a88c79b2d6377e65a2357e2700605c7d5">More...</a><br /></td></tr>
<tr class="separator:a88c79b2d6377e65a2357e2700605c7d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed54ef2c5c21c4ddb86bf63de220698b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#aed54ef2c5c21c4ddb86bf63de220698b">get_port</a> ()</td></tr>
<tr class="memdesc:aed54ef2c5c21c4ddb86bf63de220698b"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classport.html#aed54ef2c5c21c4ddb86bf63de220698b" title="port::get_port">port::get_port</a>  <a href="classport.html#aed54ef2c5c21c4ddb86bf63de220698b">More...</a><br /></td></tr>
<tr class="separator:aed54ef2c5c21c4ddb86bf63de220698b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd903c84068e3b7829d0688ae4aad58e"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#acd903c84068e3b7829d0688ae4aad58e">~port</a> ()</td></tr>
<tr class="memdesc:acd903c84068e3b7829d0688ae4aad58e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classport.html#acd903c84068e3b7829d0688ae4aad58e" title="port::~port">port::~port</a>  <a href="classport.html#acd903c84068e3b7829d0688ae4aad58e">More...</a><br /></td></tr>
<tr class="separator:acd903c84068e3b7829d0688ae4aad58e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a64c70ab31e2e88cf7bcfeb1c80abae4c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#a64c70ab31e2e88cf7bcfeb1c80abae4c">open_port</a> (std::string port_name)</td></tr>
<tr class="memdesc:a64c70ab31e2e88cf7bcfeb1c80abae4c"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classport.html#a64c70ab31e2e88cf7bcfeb1c80abae4c" title="port::open_port">port::open_port</a>  <a href="classport.html#a64c70ab31e2e88cf7bcfeb1c80abae4c">More...</a><br /></td></tr>
<tr class="separator:a64c70ab31e2e88cf7bcfeb1c80abae4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac49e6301410b8adc1e727ab2925c0e1e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#ac49e6301410b8adc1e727ab2925c0e1e">close_port</a> ()</td></tr>
<tr class="memdesc:ac49e6301410b8adc1e727ab2925c0e1e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classport.html#ac49e6301410b8adc1e727ab2925c0e1e" title="port::close_port">port::close_port</a>  <a href="classport.html#ac49e6301410b8adc1e727ab2925c0e1e">More...</a><br /></td></tr>
<tr class="separator:ac49e6301410b8adc1e727ab2925c0e1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fac0c594b80f5ac297f218bfdcab5f6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#a5fac0c594b80f5ac297f218bfdcab5f6">set_port_attribs</a> (int fd, int speed, int parity)</td></tr>
<tr class="memdesc:a5fac0c594b80f5ac297f218bfdcab5f6"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classport.html#a5fac0c594b80f5ac297f218bfdcab5f6" title="port::set_port_attribs">port::set_port_attribs</a>  <a href="classport.html#a5fac0c594b80f5ac297f218bfdcab5f6">More...</a><br /></td></tr>
<tr class="separator:a5fac0c594b80f5ac297f218bfdcab5f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c659a7ab4bbbd5f44e9914974f276a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#a4c659a7ab4bbbd5f44e9914974f276a2">set_port_block</a> (int fd, int shouldBlock)</td></tr>
<tr class="memdesc:a4c659a7ab4bbbd5f44e9914974f276a2"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classport.html#a4c659a7ab4bbbd5f44e9914974f276a2" title="port::set_port_block">port::set_port_block</a>  <a href="classport.html#a4c659a7ab4bbbd5f44e9914974f276a2">More...</a><br /></td></tr>
<tr class="separator:a4c659a7ab4bbbd5f44e9914974f276a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1742a0a6409667d7d62768709928b8fa"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#a1742a0a6409667d7d62768709928b8fa">char_arr_to_string</a> (char *text, int size)</td></tr>
<tr class="memdesc:a1742a0a6409667d7d62768709928b8fa"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classport.html#a1742a0a6409667d7d62768709928b8fa" title="port::char_arr_to_string">port::char_arr_to_string</a>  <a href="classport.html#a1742a0a6409667d7d62768709928b8fa">More...</a><br /></td></tr>
<tr class="separator:a1742a0a6409667d7d62768709928b8fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a945de28ac030cd51ca5ead10af09d7af"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#a945de28ac030cd51ca5ead10af09d7af">m_port_name</a></td></tr>
<tr class="separator:a945de28ac030cd51ca5ead10af09d7af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c0e204388098109e57d448ea548c9ac"><td class="memItemLeft" align="right" valign="top">struct termios&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#a5c0e204388098109e57d448ea548c9ac">m_port_cfg</a></td></tr>
<tr class="separator:a5c0e204388098109e57d448ea548c9ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41db952ab8ab19a07efbef5aea13cde9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classport.html#a41db952ab8ab19a07efbef5aea13cde9">m_serial_port</a></td></tr>
<tr class="separator:a41db952ab8ab19a07efbef5aea13cde9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The port class. </p>
<p>This class provides functions to work with ports. Constructors builds connection with port user code can then use only RW functions. Configuration is predefined for connection with ODrive. </p>

<p class="definition">Definition at line <a class="el" href="port_8h_source.html#l00021">21</a> of file <a class="el" href="port_8h_source.html">port.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5f40cbc450a8b0342a79b6e7ca4886e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f40cbc450a8b0342a79b6e7ca4886e9">&#9670;&nbsp;</a></span>port() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">port::port </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classport.html#a5f40cbc450a8b0342a79b6e7ca4886e9" title="port::port">port::port</a> </p>
<p>Port class constructor without parameter only declare port object, file descriptor is set to invalid value, and needs to be set with <a class="el" href="classport.html#a88c79b2d6377e65a2357e2700605c7d5" title="port::set_port">port::set_port</a> </p>
<p>&lt; Sets port file descriptor to invalid value</p>

<p class="definition">Definition at line <a class="el" href="port_8cpp_source.html#l00026">26</a> of file <a class="el" href="port_8cpp_source.html">port.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;           {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <a class="code" href="classport.html#a41db952ab8ab19a07efbef5aea13cde9">m_serial_port</a>=-1;   </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;}</div>
<div class="ttc" id="aclassport_html_a41db952ab8ab19a07efbef5aea13cde9"><div class="ttname"><a href="classport.html#a41db952ab8ab19a07efbef5aea13cde9">port::m_serial_port</a></div><div class="ttdeci">int m_serial_port</div><div class="ttdef"><b>Definition:</b> <a href="port_8h_source.html#l00027">port.h:27</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a503922986aa052488c19a63e02e7e30a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a503922986aa052488c19a63e02e7e30a">&#9670;&nbsp;</a></span>port() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">port::port </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>portName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classport.html#a5f40cbc450a8b0342a79b6e7ca4886e9" title="port::port">port::port</a> </p>
<p>Function sets private member with port name and an tries to open port with defined port name </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">portName</td><td>Name of port to which is ODrive connected </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="port_8cpp_source.html#l00034">34</a> of file <a class="el" href="port_8cpp_source.html">port.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                            {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="classport.html#a945de28ac030cd51ca5ead10af09d7af">m_port_name</a> = portName;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="classport.html#a64c70ab31e2e88cf7bcfeb1c80abae4c">open_port</a>(<a class="code" href="classport.html#a945de28ac030cd51ca5ead10af09d7af">m_port_name</a>);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;}</div>
<div class="ttc" id="aclassport_html_a64c70ab31e2e88cf7bcfeb1c80abae4c"><div class="ttname"><a href="classport.html#a64c70ab31e2e88cf7bcfeb1c80abae4c">port::open_port</a></div><div class="ttdeci">int open_port(std::string port_name)</div><div class="ttdoc">port::open_port</div><div class="ttdef"><b>Definition:</b> <a href="port_8cpp_source.html#l00126">port.cpp:126</a></div></div>
<div class="ttc" id="aclassport_html_a945de28ac030cd51ca5ead10af09d7af"><div class="ttname"><a href="classport.html#a945de28ac030cd51ca5ead10af09d7af">port::m_port_name</a></div><div class="ttdeci">std::string m_port_name</div><div class="ttdef"><b>Definition:</b> <a href="port_8h_source.html#l00024">port.h:24</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd903c84068e3b7829d0688ae4aad58e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd903c84068e3b7829d0688ae4aad58e">&#9670;&nbsp;</a></span>~port()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">port::~port </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classport.html#acd903c84068e3b7829d0688ae4aad58e" title="port::~port">port::~port</a> </p>
<p>Destructor close the port when refference to port object is lost </p>

<p class="definition">Definition at line <a class="el" href="port_8cpp_source.html#l00250">250</a> of file <a class="el" href="port_8cpp_source.html">port.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    syslog(LOG_INFO,<span class="stringliteral">&quot;Closing port&quot;</span>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="classport.html#ac49e6301410b8adc1e727ab2925c0e1e">close_port</a>();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="ttc" id="aclassport_html_ac49e6301410b8adc1e727ab2925c0e1e"><div class="ttname"><a href="classport.html#ac49e6301410b8adc1e727ab2925c0e1e">port::close_port</a></div><div class="ttdeci">int close_port()</div><div class="ttdoc">port::close_port</div><div class="ttdef"><b>Definition:</b> <a href="port_8cpp_source.html#l00199">port.cpp:199</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1742a0a6409667d7d62768709928b8fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1742a0a6409667d7d62768709928b8fa">&#9670;&nbsp;</a></span>char_arr_to_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string port::char_arr_to_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classport.html#a1742a0a6409667d7d62768709928b8fa" title="port::char_arr_to_string">port::char_arr_to_string</a> </p>
<p>This function convert char array to string </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">text</td><td>Char array with message </td></tr>
    <tr><td class="paramname">size</td><td>Size/Length of message </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String representation of message </dd></dl>

<p class="definition">Definition at line <a class="el" href="port_8cpp_source.html#l00213">213</a> of file <a class="el" href="port_8cpp_source.html">port.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                                      {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    std::string output = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; ++i) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        output = output + text[i];</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">return</span> output;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac49e6301410b8adc1e727ab2925c0e1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac49e6301410b8adc1e727ab2925c0e1e">&#9670;&nbsp;</a></span>close_port()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int port::close_port </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classport.html#ac49e6301410b8adc1e727ab2925c0e1e" title="port::close_port">port::close_port</a> </p>
<p>Function closing opened port. It simply wraps system call close()</p>
<dl class="section return"><dt>Returns</dt><dd>Function return status code indicating if function was succesful or not</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EXIT_SUCCESS</td><td>Function executed succesfully </td></tr>
    <tr><td class="paramname">EXIT_FAILURE</td><td>An error occured, function execution failed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="port_8cpp_source.html#l00199">199</a> of file <a class="el" href="port_8cpp_source.html">port.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classport.html#a41db952ab8ab19a07efbef5aea13cde9">m_serial_port</a>&gt;=0){</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        close(<a class="code" href="classport.html#a41db952ab8ab19a07efbef5aea13cde9">m_serial_port</a>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aed54ef2c5c21c4ddb86bf63de220698b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed54ef2c5c21c4ddb86bf63de220698b">&#9670;&nbsp;</a></span>get_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string port::get_port </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classport.html#aed54ef2c5c21c4ddb86bf63de220698b" title="port::get_port">port::get_port</a> </p>
<p>Function returns name of port </p><dl class="section return"><dt>Returns</dt><dd>Name of port </dd></dl>

<p class="definition">Definition at line <a class="el" href="port_8cpp_source.html#l00243">243</a> of file <a class="el" href="port_8cpp_source.html">port.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                        {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classport.html#a945de28ac030cd51ca5ead10af09d7af">m_port_name</a>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a64c70ab31e2e88cf7bcfeb1c80abae4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64c70ab31e2e88cf7bcfeb1c80abae4c">&#9670;&nbsp;</a></span>open_port()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int port::open_port </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>port_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classport.html#a64c70ab31e2e88cf7bcfeb1c80abae4c" title="port::open_port">port::open_port</a> </p>
<p>Functions open port. It embbeds system call open() to open port and config functions <a class="el" href="classport.html#a5fac0c594b80f5ac297f218bfdcab5f6" title="port::set_port_attribs">port::set_port_attribs</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port_name</td><td>Name of port that has to be opened</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Function return status code indicating if function was succesful or not</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EXIT_SUCCESS</td><td>Function executed succesfully </td></tr>
    <tr><td class="paramname">EXIT_FAILURE</td><td>An error occured, function execution failed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="port_8cpp_source.html#l00126">126</a> of file <a class="el" href="port_8cpp_source.html">port.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                      {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> * cportName = port_name.c_str();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="classport.html#a41db952ab8ab19a07efbef5aea13cde9">m_serial_port</a> = open(cportName,O_RDWR | O_NOCTTY | O_SYNC);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classport.html#a41db952ab8ab19a07efbef5aea13cde9">m_serial_port</a> &lt; 0){</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        syslog(LOG_ERR,<span class="stringliteral">&quot;Error %d while opening port  &quot;</span>,errno);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="classport.html#a5fac0c594b80f5ac297f218bfdcab5f6">set_port_attribs</a>(<a class="code" href="classport.html#a41db952ab8ab19a07efbef5aea13cde9">m_serial_port</a>,B115200,0);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
<div class="ttc" id="aclassport_html_a5fac0c594b80f5ac297f218bfdcab5f6"><div class="ttname"><a href="classport.html#a5fac0c594b80f5ac297f218bfdcab5f6">port::set_port_attribs</a></div><div class="ttdeci">int set_port_attribs(int fd, int speed, int parity)</div><div class="ttdoc">port::set_port_attribs</div><div class="ttdef"><b>Definition:</b> <a href="port_8cpp_source.html#l00050">port.cpp:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a57a366c63e2ebbd24c4a466e90cbece0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57a366c63e2ebbd24c4a466e90cbece0">&#9670;&nbsp;</a></span>read_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string port::read_port </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classport.html#a57a366c63e2ebbd24c4a466e90cbece0" title="port::read_port">port::read_port</a> </p>
<p>Function reads response message written to port by ODrive</p>
<dl class="section return"><dt>Returns</dt><dd>String with response message, otherwise return failure reading</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Response</td><td>message </td></tr>
    <tr><td class="paramname">NOT_READ</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="port_8cpp_source.html#l00176">176</a> of file <a class="el" href="port_8cpp_source.html">port.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                         {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">char</span> readBuf [256];</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordtype">int</span> numBytes=read(<a class="code" href="classport.html#a41db952ab8ab19a07efbef5aea13cde9">m_serial_port</a>,&amp;readBuf,<span class="keyword">sizeof</span>(readBuf));</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    std::string output=<span class="stringliteral">&quot;NOT_READ&quot;</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (numBytes &lt; 0) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        syslog(LOG_ERR,<span class="stringliteral">&quot;Error %d while reading from port  &quot;</span>,errno);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">return</span> output;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">if</span>(numBytes&gt;0){</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        output = <a class="code" href="classport.html#a1742a0a6409667d7d62768709928b8fa">char_arr_to_string</a>(readBuf,numBytes);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> output;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
<div class="ttc" id="aclassport_html_a1742a0a6409667d7d62768709928b8fa"><div class="ttname"><a href="classport.html#a1742a0a6409667d7d62768709928b8fa">port::char_arr_to_string</a></div><div class="ttdeci">std::string char_arr_to_string(char *text, int size)</div><div class="ttdoc">port::char_arr_to_string</div><div class="ttdef"><b>Definition:</b> <a href="port_8cpp_source.html#l00213">port.cpp:213</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a88c79b2d6377e65a2357e2700605c7d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88c79b2d6377e65a2357e2700605c7d5">&#9670;&nbsp;</a></span>set_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int port::set_port </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>portName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classport.html#a88c79b2d6377e65a2357e2700605c7d5" title="port::set_port">port::set_port</a> </p>
<p>This function can set port name and open port if object of class is declared with empty constructor </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">portName</td><td>Name of port where is ODrive connected </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Function return status code indicating if function was succesful or not</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EXIT_SUCCESS</td><td>Function executed succesfully </td></tr>
    <tr><td class="paramname">EXIT_FAILURE</td><td>An error occured, function execution failed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="port_8cpp_source.html#l00231">231</a> of file <a class="el" href="port_8cpp_source.html">port.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                                    {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="classport.html#a945de28ac030cd51ca5ead10af09d7af">m_port_name</a> = portName;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classport.html#a64c70ab31e2e88cf7bcfeb1c80abae4c">open_port</a>(<a class="code" href="classport.html#a945de28ac030cd51ca5ead10af09d7af">m_port_name</a>)==EXIT_SUCCESS){</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5fac0c594b80f5ac297f218bfdcab5f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fac0c594b80f5ac297f218bfdcab5f6">&#9670;&nbsp;</a></span>set_port_attribs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int port::set_port_attribs </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>parity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classport.html#a5fac0c594b80f5ac297f218bfdcab5f6" title="port::set_port_attribs">port::set_port_attribs</a> </p>
<p>Function does addition configuration of port, disables echod, nonblocking reading, sets reading timeout </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>File descriptor of opened port </td></tr>
    <tr><td class="paramname">speed</td><td>Baud rate defining communication speed </td></tr>
    <tr><td class="paramname">parity</td><td>Parameter determines if communication use parity bit</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Function return status code indicating if configuration was succesful or not</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EXIT_SUCCESS</td><td>Function executed succesfully </td></tr>
    <tr><td class="paramname">EXIT_FAILURE</td><td>An error occured, function execution failed </td></tr>
  </table>
  </dd>
</dl>
<p>Getting basic attributes from opened port</p>
<p>Setting speed</p>
<p>8-bit chars</p>
<p>disable IGNBRK for mismatched speed tests; otherwise receive break</p>
<p>as \000 chars</p>
<p>disable break processing</p>
<p>no signaling chars, no echo, no canonical processing</p>
<p>no remapping, no delays</p>
<p>read doesn't block</p>
<p>0.5 seconds read timeout</p>
<p>shut off xon/xoff ctrl</p>
<p>ignore modem controls,</p>
<p>enable reading</p>
<p>shut off parity</p>
<p>Saving updated attributes</p>

<p class="definition">Definition at line <a class="el" href="port_8cpp_source.html#l00050">50</a> of file <a class="el" href="port_8cpp_source.html">port.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                                                       {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keyword">struct </span>termios tty;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">if</span> (tcgetattr (fd, &amp;tty) != 0){                         </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        syslog(LOG_ERR,<span class="stringliteral">&quot;Error %d from tcgetattr  &quot;</span>,errno);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    }</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    cfsetospeed (&amp;tty, speed);          </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    cfsetispeed (&amp;tty, speed);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    tty.c_cflag = (<a class="code" href="classport.html#a5c0e204388098109e57d448ea548c9ac">m_port_cfg</a>.c_cflag &amp; ~CSIZE) | CS8;     </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    tty.c_iflag &amp;= ~IGNBRK;         </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    tty.c_lflag = 0;                </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    tty.c_oflag = 0;                </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    tty.c_cc[VMIN]  = 0;            </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    tty.c_cc[VTIME] = 5;            </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    tty.c_iflag &amp;= ~(IXON | IXOFF | IXANY); </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    tty.c_cflag |= (CLOCAL | CREAD);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    tty.c_cflag &amp;= ~(PARENB | PARODD);      </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    tty.c_cflag |= parity;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    tty.c_cflag &amp;= ~CSTOPB;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    tty.c_cflag &amp;= ~CRTSCTS;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span> (tcsetattr (fd, TCSANOW, &amp;tty) != 0){        </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        syslog(LOG_ERR,<span class="stringliteral">&quot;Error %d from tcsetattr  &quot;</span>,errno);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="ttc" id="aclassport_html_a5c0e204388098109e57d448ea548c9ac"><div class="ttname"><a href="classport.html#a5c0e204388098109e57d448ea548c9ac">port::m_port_cfg</a></div><div class="ttdeci">struct termios m_port_cfg</div><div class="ttdef"><b>Definition:</b> <a href="port_8h_source.html#l00024">port.h:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4c659a7ab4bbbd5f44e9914974f276a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c659a7ab4bbbd5f44e9914974f276a2">&#9670;&nbsp;</a></span>set_port_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int port::set_port_block </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>shouldBlock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classport.html#a4c659a7ab4bbbd5f44e9914974f276a2" title="port::set_port_block">port::set_port_block</a> </p>
<p>Function can be used to set port as blocking </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>File descriptor of opened port </td></tr>
    <tr><td class="paramname">shouldBlock</td><td>Parameter describing if port should be blocking and waiting for user input</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Function return status code indicating if configuration was succesful or not</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EXIT_SUCCESS</td><td>Function executed succesfully </td></tr>
    <tr><td class="paramname">EXIT_FAILURE</td><td>An error occured, function execution failed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="port_8cpp_source.html#l00098">98</a> of file <a class="el" href="port_8cpp_source.html">port.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                                               {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">//struct termios tty;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    memset (&amp;<a class="code" href="classport.html#a5c0e204388098109e57d448ea548c9ac">m_port_cfg</a>, 0, <span class="keyword">sizeof</span> <a class="code" href="classport.html#a5c0e204388098109e57d448ea548c9ac">m_port_cfg</a>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> (tcgetattr (fd, &amp;<a class="code" href="classport.html#a5c0e204388098109e57d448ea548c9ac">m_port_cfg</a>) != 0){</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        syslog(LOG_ERR,<span class="stringliteral">&quot;Error %d from tcgetattr  &quot;</span>,errno);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="classport.html#a5c0e204388098109e57d448ea548c9ac">m_port_cfg</a>.c_cc[VMIN]  = shouldBlock ? 1 : 0;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="classport.html#a5c0e204388098109e57d448ea548c9ac">m_port_cfg</a>.c_cc[VTIME] = 5;            <span class="comment">/* 0.5 seconds read timeout*/</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> (tcsetattr (fd, TCSANOW, &amp;<a class="code" href="classport.html#a5c0e204388098109e57d448ea548c9ac">m_port_cfg</a>) != 0){</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        syslog(LOG_ERR,<span class="stringliteral">&quot;Error %d from tcsetattr  &quot;</span>,errno);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abcab032c50e700b30f70c5fed3d1bb34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcab032c50e700b30f70c5fed3d1bb34">&#9670;&nbsp;</a></span>write_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int port::write_port </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classport.html#abcab032c50e700b30f70c5fed3d1bb34" title="port::write_port">port::write_port</a> </p>
<p>Public function to write commands to port with ODrive connected. Function adds ending symbol "\r" to message, wchich is equvivalent to enter. Then message is written to port with system call write() </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>String command that should be written to port </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Function return number of bytes written to port or failure status code </dd></dl>

<p class="definition">Definition at line <a class="el" href="port_8cpp_source.html#l00147">147</a> of file <a class="el" href="port_8cpp_source.html">port.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                                     {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msg[message.length()+1];</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (int)message.length(); i++) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        msg[i]=message[i];</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    msg[message.length()]=<span class="charliteral">&#39;\r&#39;</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">int</span> numBytes = write(<a class="code" href="classport.html#a41db952ab8ab19a07efbef5aea13cde9">m_serial_port</a>, msg, <span class="keyword">sizeof</span>(msg));</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">if</span>(numBytes &lt; 0){</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        syslog(LOG_ERR,<span class="stringliteral">&quot;Error %d while writing to port  &quot;</span>,errno);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">/*Check for return*/</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordtype">char</span> readBuf [256];</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span>(message[0]==<span class="charliteral">&#39;w&#39;</span>){</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        read(<a class="code" href="classport.html#a41db952ab8ab19a07efbef5aea13cde9">m_serial_port</a>,&amp;readBuf,<span class="keyword">sizeof</span>(readBuf));</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">return</span> numBytes;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5c0e204388098109e57d448ea548c9ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c0e204388098109e57d448ea548c9ac">&#9670;&nbsp;</a></span>m_port_cfg</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct termios port::m_port_cfg</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Private member with port settings </p>

<p class="definition">Definition at line <a class="el" href="port_8h_source.html#l00024">24</a> of file <a class="el" href="port_8h_source.html">port.h</a>.</p>

</div>
</div>
<a id="a945de28ac030cd51ca5ead10af09d7af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a945de28ac030cd51ca5ead10af09d7af">&#9670;&nbsp;</a></span>m_port_name</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string port::m_port_name</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Private member with port name </p>

<p class="definition">Definition at line <a class="el" href="port_8h_source.html#l00024">24</a> of file <a class="el" href="port_8h_source.html">port.h</a>.</p>

</div>
</div>
<a id="a41db952ab8ab19a07efbef5aea13cde9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41db952ab8ab19a07efbef5aea13cde9">&#9670;&nbsp;</a></span>m_serial_port</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int port::m_serial_port</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Private member with port file descriptor </p>

<p class="definition">Definition at line <a class="el" href="port_8h_source.html#l00027">27</a> of file <a class="el" href="port_8h_source.html">port.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="port_8h_source.html">port.h</a></li>
<li><a class="el" href="port_8cpp_source.html">port.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
